{% extends "base.html" %}

{% block container %}


<div class="modal fade bs-example-modal-lg" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
 <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">关闭</span></button>
        <h4 class="modal-title" id="myModalLabel">预览第一个条目的正文部分</h4>
      </div>
      <div class="modal-body" id="preview">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
        <button type="button" class="btn btn-primary" onclick="get_full()">生成RSS</button>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
function show(){
    document.getElementById("bs").style.display = "block";
}
function hide(){
    document.getElementById("bs").style.display = "none";
}
function modal(){
    $('#myModal').modal();

    var p = $('form').serialize();
    var ajax_load = '<p class="text-center"><img src="http://phyng.qiniudn.com/loding.gif" alt="loding..."></p>';
    var loadUrl = '/home/template/full/';
    console.log(p);

    $("#preview")
            .html(ajax_load)
            .load(loadUrl, p);
}
function get_full(){
    var p = $('form').serialize();
    var a = p.split('&');
    var s = a[1]+'&'+a[2]+'&'+a[3]+'&'+a[4]+'&'+a[5];
    var baseUrl = '/home/template/full/';
    window.open(baseUrl + '?' + s);


}
</script>

<h1 class="page-header">全文 RSS 生成器</h1>
<h2 class="sub-header">输入 RSS 链接</h2>

<div class="col-md-12">
<p></p>


<form name="form1" class="form-horizontal" role="form"  action="{% url 'home:full' %}" method="post">
 {% csrf_token %}
  <div class="form-group">
    <label for="url" class="col-sm-2 control-label" >RSS 地址</label>
    <div class="col-sm-8">
      <input name="url" type="url" class="form-control"  placeholder="http://" autofocus="autofocus" pattern="^http">

    </div>
  </div>

  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-8">
      <div class="radio col-sm-6" >
        <label>
          <input type="radio" name="type" id="optionsRadios1" value="ra" checked onchange="hide()">
          尝试使用<strong> Readability </strong>自动提取正文
        </label>
      </div>
    </div>
  </div>

  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-8">
      <div class="radio col-sm-6">
        <label>
          <input type="radio" name="type" id="optionsRadios2" value="bs" onchange="show()">
          使用<strong> BeautifulSoup </strong>自定义参数提取正文
        </label>
      </div>
    </div>
  </div>

  <div id="bs" style="display:none">
  <div class="col-sm-3"></div>
  <div class="form-group col-sm-9 form-inline">

    <div class="input-group col-sm-3">
      <div class="input-group-addon">tag:</div>
      <input name="tag" type="text" class="form-control"  placeholder="div" >
      </div>

    <div class="input-group col-sm-3">
      <div class="input-group-addon">class:</div>
      <input name="class" type="text" class="form-control"  placeholder="content">
      </div>

    <div class="input-group col-sm-3">
      <div class="input-group-addon">id:</div>
      <input name="id" type="text" class="form-control"  placeholder="post">
      </div>
    </div>

  </div>



<div class="form-group">
    <div class="col-sm-offset-2 col-sm-8">
        <button type="button" class="btn btn-primary" onclick="modal()">预览</button>
    </div>
</div>

</form>







</div>









<div>
<h2 class="sub-header">说明</h2>

<p>输入非全文的 RSS，输出全文RSS。</p>
</div>
{% endblock container %}



